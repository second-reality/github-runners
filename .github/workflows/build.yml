on:
  workflow_dispatch:

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  # https://github.com/actions/runner-images
  debug-job:
    strategy:
      fail-fast: false
      matrix:
        os: [ubuntu-24.04, macos-26, macos-15-intel, windows-2025, ubuntu-24.04-arm]
    runs-on: ${{ matrix.os }}
    steps:
      - uses: owenthereal/action-upterm@v1
        with:
          limit-access-to-actor: true

  debug-windows-11-arm:
    runs-on: windows-11-arm
    steps:
    - uses: msys2/setup-msys2@v2
      with:
        msystem: 'CLANGARM64'
        location: C:\.\
    # To open CLANGARM64 shell: env MSYSTEM=CLANGARM64 bash -l
    - uses: owenthereal/action-upterm@v1
      with:
        limit-access-to-actor: true

  debug-freebsd:
    runs-on: ubuntu-latest
    steps:
      - uses: vmactions/freebsd-vm@v1
        with:
          copyback: false
          release: "14.3"
      - shell: freebsd {0}
        run: set -ex && pkg update && pkg install -y git
      - run: echo "connect with 'ssh freebsd'"
      - uses: owenthereal/action-upterm@v1
        with:
          limit-access-to-actor: true

  debug-netbsd:
    runs-on: ubuntu-latest
    steps:
      - uses: vmactions/netbsd-vm@v1
        with:
          copyback: false
          release: "10.0"
      - shell: netbsd {0}
        run: set -ex && pkg_add pkgin && pkgin -y install git
      - run: echo "connect with 'ssh netbsd'"
      - uses: owenthereal/action-upterm@v1
        with:
          limit-access-to-actor: true
